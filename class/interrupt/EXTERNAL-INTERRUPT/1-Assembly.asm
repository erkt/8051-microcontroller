LCD EQU P0
RS BIT P3.4
RW BIT P3.5
EN BIT P3.6
CSEG AT 00H
	AJMP MAIN

CSEG AT 0003H
	ACALL INTERR
	RETI
CSEG AT 100H
INTERR:	
	MOV A,#'E'
	MOV R5,#0XC0
	ACALL CMD
	ACALL DIS
	RET
INI:
	MOV R5,#0X01
	ACALL CMD
	MOV R5,#0X02
	ACALL CMD
	MOV R5,#0X06
	ACALL CMD
	MOV R5,#0X0C
	ACALL CMD
	MOV R5,#0X38
	ACALL CMD
	MOV R5,#0X80
	ACALL CMD
	RET
DELAY:
	MOV R7,#02
L:	MOV R6,#250
	DJNZ R6,$
	MOV R6,#247
	DJNZ R6,$
	DJNZ R7,L
	RET
CMD:
	MOV LCD,R5
	CLR RS
	CLR RW
	SETB EN
	ACALL DELAY
	CLR EN
	RET
DIS:
	MOV LCD,A
	SETB RS
	CLR RW
	SETB EN
	ACALL DELAY
	CLR EN
	RET

CSEG AT 50H
MAIN:
	ACALL INI
	;MOV IE,#0X81
	SETB EA
	SETB EX0
	CLR IT0
LOOP:
	MOV R5,#0X01 
	ACALL CMD
	MOV A,#'M'
	ACALL DIS
	ACALL DELAY
	ACALL DELAY
	SJMP LOOP
END