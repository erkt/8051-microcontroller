;ATOZ TRAMNSMITT ON UART USING EXTERNAL INTERRUPT
LED BIT P1.0
CSEG AT 00H
	AJMP MAIN

CSEG AT 0003H
	ACALL INT_OCU
	RETI

CSEG AT 1000H
	;DB 'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'
	DB "ABCDEFGHIJKLMNOPQRSTUVWXYZ"

CSEG AT 100H


INT_OCU:
	CJNE R5,#26,ST
	SJMP LAT
ST:
	MOV A,R5
	MOVC A,@A+DPTR
	ACALL U_TX
	INC R5
LAT:
	NOP
	RET

DELAY:
	;MOV TMOD,#0X01
	MOV TH0,#(13535>>8)
	MOV TL0,#(13535 & 0XFF)
	SETB TR0
	JNB TF0,$
	CLR TF0
	CLR TR0
	RET

U_INI:
	MOV SCON,#0X50
	MOV TMOD,#0X21
	MOV TH1,#253
	MOV TL1,#253
	SETB TR1
	RET

U_TX:
	MOV SBUF,A
	JNB TI,$
	CLR TI
	RET

U_RX:
	JNB RI,$
	CLR RI
	MOV A,SBUF
	RET


CSEG AT 50H
MAIN:
	ACALL U_INI
	MOV DPTR,#1000H
	SETB EA
	SETB EX0
	SETB IT0
	MOV R5,#00H
LOOP:
	CPL LED
	ACALL DELAY
	SJMP LOOP

	END
